{"version":3,"sources":["webpack:///openseadragon-guides.js","webpack:///webpack/bootstrap f89172e7af810e97b220","webpack:///./src/globals.js","webpack:///./src/session.js","webpack:///./src/guide.js","webpack:///./src/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","Object","defineProperty","configurable","enumerable","get","n","__esModule","o","object","property","prototype","hasOwnProperty","p","s","$","OpenSeadragon","DIRECTION_HORIZONTAL","Symbol","DIRECTION_VERTICAL","addGuide","id","x","y","dir","direction","guidesList","getGuides","guide","find","push","saveData","deleteGuide","guides","filter","data","window","sessionStorage","getItem","STORAGE_ID","JSON","parse","arr","setItem","stringify","_globals","useStorage","default","_interopRequireDefault","obj","_classCallCheck","instance","Constructor","TypeError","createElem","elem","document","createElement","classList","add","Error","Guide","undefined","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_session","_session2","viewer","arguments","this","Date","now","point","viewport","getCenter","overlay","Overlay","draw","saveInStorage","addHandlers","tracker","MouseTracker","element","clickTimeThreshold","clickDistThreshold","dragHandler","bind","dragEndHandler","dblClickHandler","remove","addHandler","event","delta","deltaPointsFromPixels","update","drawHTML","drawer","container","removeHandler","destroy","_guide","version","major","Viewer","options","guidesInstance","Guides","_this","extend","horizontalGuideButton","verticalGuideButton","prefixUrl","removeOnClose","useSessionStorage","navImages","guideHorizontal","REST","GROUP","HOVER","DOWN","guideVertical","prefix","useGroup","buttons","anyButton","onFocus","onBlur","Button","getElement","tooltip","getString","srcRest","srcGroup","srcHover","srcDown","onRelease","createHorizontalGuide","createVerticalGuide","appendChild","forEach"],"mappings":"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","file":"openseadragon-guides.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmory exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tObject.defineProperty(exports, name, {\n/******/ \t\t\tconfigurable: false,\n/******/ \t\t\tenumerable: true,\n/******/ \t\t\tget: getter\n/******/ \t\t});\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\"use strict\";\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Not importing Openseadragon into the bundle, use global var instead\nvar $ = exports.$ = OpenSeadragon;\n\nvar DIRECTION_HORIZONTAL = exports.DIRECTION_HORIZONTAL = Symbol('horizontal');\nvar DIRECTION_VERTICAL = exports.DIRECTION_VERTICAL = Symbol('vertical');\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _globals = __webpack_require__(0);\n\nvar useStorage = false;\nvar STORAGE_ID = 'openseadragon-guides';\n\nfunction addGuide(id, x, y, dir) {\n  var direction = dir === _globals.DIRECTION_HORIZONTAL ? 'horizontal' : 'vertical';\n  var guidesList = getGuides();\n  // Check if guide with this id already exists\n  var guide = guidesList.find(function (guide) {\n    return guide.id === id;\n  });\n\n  // If guide exists update, otherwise create new one\n  if (guide) {\n    guide.x = x;\n    guide.y = y;\n  } else {\n    guidesList.push({ id: id, x: x, y: y, direction: direction });\n  }\n\n  saveData(guidesList);\n}\n\nfunction deleteGuide(id) {\n  var guides = getGuides();\n\n  saveData(guides.filter(function (guide) {\n    return guide.id !== id;\n  }));\n}\n\nfunction getGuides() {\n  var data = window.sessionStorage.getItem(STORAGE_ID);\n\n  if (data) {\n    return JSON.parse(data);\n  }\n\n  return [];\n}\n\nfunction saveData(arr) {\n  window.sessionStorage.setItem(STORAGE_ID, JSON.stringify(arr));\n}\n\nexports.default = {\n  addGuide: addGuide,\n  deleteGuide: deleteGuide,\n  getGuides: getGuides,\n  useStorage: useStorage\n};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Guide = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _globals = __webpack_require__(0);\n\nvar _session = __webpack_require__(1);\n\nvar _session2 = _interopRequireDefault(_session);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Guide = exports.Guide = function () {\n  function Guide(viewer) {\n    var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _globals.DIRECTION_HORIZONTAL;\n    var id = arguments[2];\n    var x = arguments[3];\n    var y = arguments[4];\n\n    _classCallCheck(this, Guide);\n\n    this.viewer = viewer;\n    this.direction = direction;\n    this.id = id ? id : Date.now();\n\n    // Center guide by default\n    this.point = this.viewer.viewport.getCenter();\n    this.point.x = x ? x : this.point.x;\n    this.point.y = y ? y : this.point.y;\n\n    this.elem = createElem(this.direction, this.id);\n    this.overlay = new _globals.$.Overlay(this.elem, this.point);\n    this.draw();\n\n    // Store guide in session\n    this.saveInStorage();\n\n    this.addHandlers();\n  }\n\n  _createClass(Guide, [{\n    key: 'addHandlers',\n    value: function addHandlers() {\n      // Listen for mouse events on the guide\n      this.tracker = new _globals.$.MouseTracker({\n        element: this.elem,\n        clickTimeThreshold: this.viewer.clickTimeThreshold,\n        clickDistThreshold: this.viewer.clickDistThreshold,\n        dragHandler: this.dragHandler.bind(this),\n        dragEndHandler: this.dragEndHandler.bind(this),\n        dblClickHandler: this.remove.bind(this)\n      });\n\n      // Redraw guide when viewer changes\n      this.viewer.addHandler('open', this.draw.bind(this));\n      this.viewer.addHandler('animation', this.draw.bind(this));\n      this.viewer.addHandler('resize', this.draw.bind(this));\n      this.viewer.addHandler('rotate', this.draw.bind(this));\n    }\n  }, {\n    key: 'dragHandler',\n    value: function dragHandler(event) {\n      var delta = this.viewer.viewport.deltaPointsFromPixels(event.delta, true);\n\n      switch (this.direction) {\n        case _globals.DIRECTION_HORIZONTAL:\n          this.point.y += delta.y;\n          break;\n        case _globals.DIRECTION_VERTICAL:\n          this.point.x += delta.x;\n          break;\n      }\n\n      this.elem.classList.add('osd-guide-drag');\n      this.draw();\n    }\n  }, {\n    key: 'dragEndHandler',\n    value: function dragEndHandler() {\n      this.elem.classList.remove('osd-guide-drag');\n      this.saveInStorage();\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      if (this.point) {\n        this.overlay.update(this.point);\n        this.overlay.drawHTML(this.viewer.drawer.container, this.viewer.viewport);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      this.viewer.removeHandler('open', this.draw.bind(this));\n      this.viewer.removeHandler('animation', this.draw.bind(this));\n      this.viewer.removeHandler('resize', this.draw.bind(this));\n      this.viewer.removeHandler('rotate', this.draw.bind(this));\n\n      this.overlay.destroy();\n      this.point = null;\n\n      _session2.default.deleteGuide(this.id);\n\n      return this;\n    }\n  }, {\n    key: 'saveInStorage',\n    value: function saveInStorage() {\n      if (_session2.default.useStorage) {\n        _session2.default.addGuide(this.id, this.point.x, this.point.y, this.direction);\n      }\n    }\n  }]);\n\n  return Guide;\n}();\n\nfunction createElem(direction, id) {\n  var elem = document.createElement('div');\n\n  elem.id = 'osd-guide-' + id;\n  elem.classList.add('osd-guide');\n\n  switch (direction) {\n    case _globals.DIRECTION_HORIZONTAL:\n      elem.classList.add('osd-guide-horizontal');\n      break;\n    case _globals.DIRECTION_VERTICAL:\n      elem.classList.add('osd-guide-vertical');\n      break;\n    default:\n      throw new Error('Invalid guide direction');\n  }\n\n  return elem;\n}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n'use strict';\n\nvar _guide = __webpack_require__(2);\n\nvar _globals = __webpack_require__(0);\n\nvar _session = __webpack_require__(1);\n\nvar _session2 = _interopRequireDefault(_session);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nif (!_globals.$.version || _globals.$.version.major < 2) {\n  throw new Error('This version of OpenSeadragon Guides requires OpenSeadragon version 2.0.0+');\n}\n\n_globals.$.Viewer.prototype.guides = function (options) {\n  if (!this.guidesInstance || options) {\n    options = options || {};\n    options.viewer = this;\n    this.guidesInstance = new _globals.$.Guides(options);\n  }\n\n  return this.guidesInstance;\n};\n\n_globals.$.Guides = function (options) {\n  var _this = this;\n\n  _globals.$.extend(true, this, {\n    // internal state properties\n    viewer: null,\n    guides: [],\n\n    // options\n    horizontalGuideButton: null,\n    verticalGuideButton: null,\n    prefixUrl: null,\n    removeOnClose: false,\n    useSessionStorage: false,\n    navImages: {\n      guideHorizontal: {\n        REST: 'guidehorizontal_rest.png',\n        GROUP: 'guidehorizontal_grouphover.png',\n        HOVER: 'guidehorizontal_hover.png',\n        DOWN: 'guidehorizontal_pressed.png'\n      },\n      guideVertical: {\n        REST: 'guidevertical_rest.png',\n        GROUP: 'guidevertical_grouphover.png',\n        HOVER: 'guidevertical_hover.png',\n        DOWN: 'guidevertical_pressed.png'\n      }\n    }\n  }, options);\n\n  _globals.$.extend(true, this.navImages, this.viewer.navImages);\n\n  var prefix = this.prefixUrl || this.viewer.prefixUrl || '';\n  var useGroup = this.viewer.buttons && this.viewer.buttons.buttons;\n  var anyButton = useGroup ? this.viewer.buttons.buttons[0] : null;\n  var onFocus = anyButton ? anyButton.onFocus : null;\n  var onBlur = anyButton ? anyButton.onBlur : null;\n\n  this.horizontalGuideButton = new _globals.$.Button({\n    element: this.horizontalGuideButton ? _globals.$.getElement(this.horizontalGuideButton) : null,\n    clickTimeThreshold: this.viewer.clickTimeThreshold,\n    clickDistThreshold: this.viewer.clickDistThreshold,\n    tooltip: _globals.$.getString('Tooltips.HorizontalGuide') || 'Horizontal guide',\n    srcRest: prefix + this.navImages.guideHorizontal.REST,\n    srcGroup: prefix + this.navImages.guideHorizontal.GROUP,\n    srcHover: prefix + this.navImages.guideHorizontal.HOVER,\n    srcDown: prefix + this.navImages.guideHorizontal.DOWN,\n    onRelease: this.createHorizontalGuide.bind(this),\n    onFocus: onFocus,\n    onBlur: onBlur\n  });\n\n  this.verticalGuideButton = new _globals.$.Button({\n    element: this.verticalGuideButton ? _globals.$.getElement(this.verticalGuideButton) : null,\n    clickTimeThreshold: this.viewer.clickTimeThreshold,\n    clickDistThreshold: this.viewer.clickDistThreshold,\n    tooltip: _globals.$.getString('Tooltips.VerticalGuide') || 'vertical guide',\n    srcRest: prefix + this.navImages.guideVertical.REST,\n    srcGroup: prefix + this.navImages.guideVertical.GROUP,\n    srcHover: prefix + this.navImages.guideVertical.HOVER,\n    srcDown: prefix + this.navImages.guideVertical.DOWN,\n    onRelease: this.createVerticalGuide.bind(this),\n    onFocus: onFocus,\n    onBlur: onBlur\n  });\n\n  if (useGroup) {\n    this.viewer.buttons.buttons.push(this.horizontalGuideButton);\n    this.viewer.buttons.element.appendChild(this.horizontalGuideButton.element);\n    this.viewer.buttons.buttons.push(this.verticalGuideButton);\n    this.viewer.buttons.element.appendChild(this.verticalGuideButton.element);\n  }\n\n  // Store globally so it can be used in the Guide objects\n  _session2.default.useStorage = this.useSessionStorage;\n\n  // Check if any guides are stored in sessionStorage\n  if (_session2.default.useStorage) {\n    var guides = _session2.default.getGuides();\n\n    guides.forEach(function (guide) {\n      _this.guides.push(new _guide.Guide(_this.viewer, guide.direction === 'horizontal' ? _globals.DIRECTION_HORIZONTAL : _globals.DIRECTION_VERTICAL, guide.id, guide.x, guide.y));\n    });\n  }\n\n  // Remove guides when viewer closes\n  if (this.removeOnClose) {\n    this.viewer.addHandler('close', function () {\n      _this.guides.forEach(function (guide) {\n        return guide.remove();\n      });\n      _this.guides = [];\n    });\n  }\n};\n\n_globals.$.extend(_globals.$.Guides.prototype, {\n  createHorizontalGuide: function createHorizontalGuide() {\n    this.guides.push(new _guide.Guide(this.viewer, _globals.DIRECTION_HORIZONTAL));\n  },\n  createVerticalGuide: function createVerticalGuide() {\n    this.guides.push(new _guide.Guide(this.viewer, _globals.DIRECTION_VERTICAL));\n  }\n});\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// openseadragon-guides.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f89172e7af810e97b220","// Not importing Openseadragon into the bundle, use global var instead\nexport const $ = OpenSeadragon;\n\nexport const DIRECTION_HORIZONTAL = Symbol('horizontal');\nexport const DIRECTION_VERTICAL = Symbol('vertical');\n\n\n\n// WEBPACK FOOTER //\n// ./src/globals.js","import {DIRECTION_HORIZONTAL} from './globals';\n\nlet useStorage = false;\nconst STORAGE_ID = 'openseadragon-guides';\n\nfunction addGuide(id, x, y, dir) {\n  const direction = dir === DIRECTION_HORIZONTAL ? 'horizontal' : 'vertical';\n  const guidesList = getGuides();\n  // Check if guide with this id already exists\n  const guide = guidesList.find(guide => guide.id === id);\n\n  // If guide exists update, otherwise create new one\n  if (guide) {\n    guide.x = x;\n    guide.y = y;\n  } else {\n    guidesList.push({id, x, y, direction});\n  }\n\n  saveData(guidesList);\n}\n\nfunction deleteGuide(id) {\n  const guides = getGuides();\n\n  saveData(guides.filter(guide => guide.id !== id));\n}\n\nfunction getGuides() {\n  const data = window.sessionStorage.getItem(STORAGE_ID);\n\n  if (data) {\n    return JSON.parse(data);\n  }\n\n  return [];\n}\n\nfunction saveData(arr) {\n  window.sessionStorage.setItem(\n    STORAGE_ID,\n    JSON.stringify(arr)\n  );\n}\n\nexport default {\n  addGuide,\n  deleteGuide,\n  getGuides,\n  useStorage\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/session.js","import {$, DIRECTION_HORIZONTAL, DIRECTION_VERTICAL} from './globals';\nimport session from './session';\n\nexport class Guide {\n\n  constructor(viewer, direction = DIRECTION_HORIZONTAL, id, x, y) {\n    this.viewer = viewer;\n    this.direction = direction;\n    this.id = id ? id : Date.now();\n\n    // Center guide by default\n    this.point = this.viewer.viewport.getCenter();\n    this.point.x = x ? x : this.point.x;\n    this.point.y = y ? y : this.point.y;\n\n    this.elem = createElem(this.direction, this.id);\n    this.overlay = new $.Overlay(this.elem, this.point);\n    this.draw();\n\n    // Store guide in session\n    this.saveInStorage();\n\n    this.addHandlers();\n  }\n\n  addHandlers() {\n    // Listen for mouse events on the guide\n    this.tracker = new $.MouseTracker({\n      element: this.elem,\n      clickTimeThreshold: this.viewer.clickTimeThreshold,\n      clickDistThreshold: this.viewer.clickDistThreshold,\n      dragHandler: this.dragHandler.bind(this),\n      dragEndHandler: this.dragEndHandler.bind(this),\n      dblClickHandler: this.remove.bind(this)\n    });\n\n    // Redraw guide when viewer changes\n    this.viewer.addHandler('open', this.draw.bind(this));\n    this.viewer.addHandler('animation', this.draw.bind(this));\n    this.viewer.addHandler('resize', this.draw.bind(this));\n    this.viewer.addHandler('rotate', this.draw.bind(this));\n  }\n\n  dragHandler(event) {\n    const delta = this.viewer.viewport.deltaPointsFromPixels(event.delta, true);\n\n    switch (this.direction) {\n      case DIRECTION_HORIZONTAL:\n        this.point.y += delta.y;\n        break;\n      case DIRECTION_VERTICAL:\n        this.point.x += delta.x;\n        break;\n    }\n\n    this.elem.classList.add('osd-guide-drag');\n    this.draw();\n  }\n\n  dragEndHandler() {\n    this.elem.classList.remove('osd-guide-drag');\n    this.saveInStorage();\n  }\n\n  draw() {\n    if (this.point) {\n      this.overlay.update(this.point);\n      this.overlay.drawHTML(this.viewer.drawer.container, this.viewer.viewport);\n    }\n\n    return this;\n  }\n\n  remove() {\n    this.viewer.removeHandler('open', this.draw.bind(this));\n    this.viewer.removeHandler('animation', this.draw.bind(this));\n    this.viewer.removeHandler('resize', this.draw.bind(this));\n    this.viewer.removeHandler('rotate', this.draw.bind(this));\n\n    this.overlay.destroy();\n    this.point = null;\n\n    session.deleteGuide(this.id);\n\n    return this;\n  }\n\n  saveInStorage() {\n    if (session.useStorage) {\n      session.addGuide(this.id, this.point.x, this.point.y, this.direction);\n    }\n  }\n}\n\nfunction createElem(direction, id) {\n  const elem = document.createElement('div');\n\n  elem.id = `osd-guide-${id}`;\n  elem.classList.add('osd-guide');\n\n  switch (direction) {\n    case DIRECTION_HORIZONTAL:\n      elem.classList.add('osd-guide-horizontal');\n      break;\n    case DIRECTION_VERTICAL:\n      elem.classList.add('osd-guide-vertical');\n      break;\n    default:\n      throw new Error('Invalid guide direction');\n  }\n\n  return elem;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/guide.js","import {Guide} from './guide';\nimport {$, DIRECTION_HORIZONTAL, DIRECTION_VERTICAL} from './globals';\nimport session from './session';\n\nif (!$.version || $.version.major < 2) {\n  throw new Error(\n    'This version of OpenSeadragon Guides requires OpenSeadragon version 2.0.0+'\n  );\n}\n\n$.Viewer.prototype.guides = function(options) {\n  if (!this.guidesInstance || options) {\n    options = options || {};\n    options.viewer = this;\n    this.guidesInstance = new $.Guides(options);\n  }\n\n  return this.guidesInstance;\n};\n\n$.Guides = function(options) {\n  $.extend(true, this, {\n    // internal state properties\n    viewer: null,\n    guides: [],\n\n    // options\n    horizontalGuideButton: null,\n    verticalGuideButton: null,\n    prefixUrl: null,\n    removeOnClose: false,\n    useSessionStorage: false,\n    navImages: {\n      guideHorizontal: {\n        REST: 'guidehorizontal_rest.png',\n        GROUP: 'guidehorizontal_grouphover.png',\n        HOVER: 'guidehorizontal_hover.png',\n        DOWN: 'guidehorizontal_pressed.png'\n      },\n      guideVertical: {\n        REST: 'guidevertical_rest.png',\n        GROUP: 'guidevertical_grouphover.png',\n        HOVER: 'guidevertical_hover.png',\n        DOWN: 'guidevertical_pressed.png'\n      }\n    }\n  }, options);\n\n  $.extend(true, this.navImages, this.viewer.navImages);\n\n  const prefix = this.prefixUrl || this.viewer.prefixUrl || '';\n  const useGroup = this.viewer.buttons && this.viewer.buttons.buttons;\n  const anyButton = useGroup ? this.viewer.buttons.buttons[0] : null;\n  const onFocus = anyButton ? anyButton.onFocus : null;\n  const onBlur = anyButton ? anyButton.onBlur : null;\n\n  this.horizontalGuideButton = new $.Button({\n    element: this.horizontalGuideButton ? $.getElement(this.horizontalGuideButton) : null,\n    clickTimeThreshold: this.viewer.clickTimeThreshold,\n    clickDistThreshold: this.viewer.clickDistThreshold,\n    tooltip: $.getString('Tooltips.HorizontalGuide') || 'Horizontal guide',\n    srcRest: prefix + this.navImages.guideHorizontal.REST,\n    srcGroup: prefix + this.navImages.guideHorizontal.GROUP,\n    srcHover: prefix + this.navImages.guideHorizontal.HOVER,\n    srcDown: prefix + this.navImages.guideHorizontal.DOWN,\n    onRelease: this.createHorizontalGuide.bind(this),\n    onFocus,\n    onBlur\n  });\n\n  this.verticalGuideButton = new $.Button({\n    element: this.verticalGuideButton ? $.getElement(this.verticalGuideButton) : null,\n    clickTimeThreshold: this.viewer.clickTimeThreshold,\n    clickDistThreshold: this.viewer.clickDistThreshold,\n    tooltip: $.getString('Tooltips.VerticalGuide') || 'vertical guide',\n    srcRest: prefix + this.navImages.guideVertical.REST,\n    srcGroup: prefix + this.navImages.guideVertical.GROUP,\n    srcHover: prefix + this.navImages.guideVertical.HOVER,\n    srcDown: prefix + this.navImages.guideVertical.DOWN,\n    onRelease: this.createVerticalGuide.bind(this),\n    onFocus,\n    onBlur\n  });\n\n  if (useGroup) {\n    this.viewer.buttons.buttons.push(this.horizontalGuideButton);\n    this.viewer.buttons.element.appendChild(this.horizontalGuideButton.element);\n    this.viewer.buttons.buttons.push(this.verticalGuideButton);\n    this.viewer.buttons.element.appendChild(this.verticalGuideButton.element);\n  }\n\n  // Store globally so it can be used in the Guide objects\n  session.useStorage = this.useSessionStorage;\n\n  // Check if any guides are stored in sessionStorage\n  if (session.useStorage) {\n    const guides = session.getGuides();\n\n    guides.forEach(guide => {\n      this.guides.push(new Guide(\n        this.viewer,\n        guide.direction === 'horizontal' ?\n          DIRECTION_HORIZONTAL :\n          DIRECTION_VERTICAL,\n        guide.id,\n        guide.x,\n        guide.y\n      ));\n    });\n  }\n\n  // Remove guides when viewer closes\n  if (this.removeOnClose) {\n    this.viewer.addHandler('close', () => {\n      this.guides.forEach(guide => guide.remove());\n      this.guides = [];\n    });\n  }\n};\n\n$.extend($.Guides.prototype, {\n  createHorizontalGuide() {\n    this.guides.push(new Guide(this.viewer, DIRECTION_HORIZONTAL));\n  },\n\n  createVerticalGuide() {\n    this.guides.push(new Guide(this.viewer, DIRECTION_VERTICAL));\n  }\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}